(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),s=(a(87),a(25)),o=a(12),u=a(11),d=a.n(u),l=a(17),p=a(18),h=a(42),f=a.n(h),j=f.a.create({baseURL:"https://api.teleport.org/api/cities/"}),b={getCity:function(){var e=Object(l.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("?search=".concat(t,"&limit=5"));case 2:return a=e.sent,console.log(a),e.abrupt("return",a.data._embedded["city:search-results"]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=Object(p.c)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppError:function(e,t){e.error=t.payload.error},setAppStatus:function(e,t){e.status=t.payload.status}}}),O=m.reducer,x=m.actions,y=x.setAppError,v=x.setAppStatus,g=Object(p.b)("cites/fetchCities",function(){var e=Object(l.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.getCity(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),a.dispatch(y({error:String(e.t0)})),e.abrupt("return",a.rejectWithValue(null));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()),w=Object(p.c)({name:"cites",initialState:{trackCities:[],searchCities:[]},reducers:{addCity:function(e,t){e.trackCities.find((function(e){return e===t.payload.cityId}))||e.trackCities.unshift(t.payload.cityId)},addTrackCities:function(e,t){e.trackCities=t.payload.cities},deleteCity:function(e,t){var a=e.trackCities.findIndex((function(e){return e===t.payload.id}));e.trackCities.splice(a,1)}},extraReducers:function(e){e.addCase(g.fulfilled,(function(e,t){e.searchCities=t.payload}))}}),C=w.reducer,k=w.actions,S=k.addCity,_=k.addTrackCities,W=k.deleteCity,I="f49f252e14653d371d0e45f5c7398f20",N=f.a.create({baseURL:"https://api.openweathermap.org/"}),F={getWeatherCheckedCity:function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("data/2.5/weather?q=".concat(t,"&appid=").concat(I));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUpdatedWeatherCheckedCity:function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("data/2.5/weather?id=".concat(t,"&appid=").concat(I));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateCheckedWeatherCityAll:function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return N.get("data/2.5/weather?id=".concat(e,"&appid=").concat(I))})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H=function(e,t){return{id:e.data.id,name:t,temp:T(e.data.main.temp),temp_max:T(e.data.main.temp_max),temp_min:T(e.data.main.temp_min),humidity:e.data.main.humidity,pressure:E(e.data.main.pressure),icon:e.data.weather[0].icon,wind:e.data.wind.speed,deg:e.data.wind.deg,date:A()}},A=function(){return(new Date).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"})},T=function(e){return Math.round(e-273)},E=function(e){return Math.round(.00750063755419211*e*100)},J=Object(p.b)("weathers/updateWeatherAll",function(){var e=Object(l.a)(d.a.mark((function e(t,a){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.getState(),a.dispatch(v({status:"loading"})),e.next=5,F.updateCheckedWeatherCityAll(n.cities.trackCities);case 5:return r=e.sent,a.dispatch(v({status:"succeeded"})),c=r.map((function(e){return H(e,n.weathers[e.data.id].name)})).reduce((function(e,t){return e[t.id]=t,e}),{}),e.abrupt("return",{weathers:c});case 11:return e.prev=11,e.t0=e.catch(0),a.dispatch(v({status:"failed"})),a.dispatch(y({error:String(e.t0)})),e.abrupt("return",a.rejectWithValue(null));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()),L=Object(p.b)("weathers/updateWeather",function(){var e=Object(l.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.dispatch(v({status:"loading"})),e.next=4,F.getUpdatedWeatherCheckedCity(t.id);case 4:return n=e.sent,a.dispatch(v({status:"succeeded"})),r=H(n,t.city),e.abrupt("return",{weather:r});case 10:return e.prev=10,e.t0=e.catch(0),a.dispatch(v({status:"failed"})),a.dispatch(y({error:String(e.t0)})),e.abrupt("return",a.rejectWithValue(null));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()),R=Object(p.b)("weathers/fetchWeather",function(){var e=Object(l.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.dispatch(v({status:"loading"})),e.next=4,F.getWeatherCheckedCity(t);case 4:return n=e.sent,r=H(n,t),a.dispatch(S({cityId:r.id})),a.dispatch(v({status:"succeeded"})),e.abrupt("return",{weather:r});case 11:return e.prev=11,e.t0=e.catch(0),a.dispatch(v({status:"failed"})),a.dispatch(y({error:String(e.t0)})),e.abrupt("return",a.rejectWithValue(null));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()),M=Object(p.c)({name:"weathers",initialState:{},reducers:{addWeathers:function(e,t){return t.payload.weathers},deleteCityWeather:function(e,t){delete e[t.payload.id]}},extraReducers:function(e){e.addCase(R.fulfilled,(function(e,t){void 0!==t.payload.weather&&(e[t.payload.weather.id]=t.payload.weather)})),e.addCase(S,(function(e,t){void 0!==t.payload.cityId&&(e[t.payload.cityId]={})})),e.addCase(L.fulfilled,(function(e,t){e[t.payload.weather.id]=t.payload.weather})),e.addCase(J.fulfilled,(function(e,t){return t.payload.weathers}))}}),U=M.reducer,z=M.actions,V=z.addWeathers,D=z.deleteCityWeather,P=a(150),q=a(151),B=a(152),X=a(153),G=a(154),K=a(48),Q=a(47),Y=a(74),Z=a.n(Y),$=a(148),ee=a(2),te=r.a.memo((function(e){return Object(ee.jsx)($.a,{onClick:e.onClickHandler,type:"button",variant:"contained",color:e.color,children:e.title})})),ae=a(28),ne=a.n(ae),re=Object(P.a)((function(e){return{root:{maxWidth:420},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Q.a[500]}}})),ce=function(e){var t=re(),a=Object(o.b)();return Object(ee.jsxs)(q.a,{className:t.root,style:{margin:"10px",position:"relative",width:"20em"},children:[Object(ee.jsx)(B.a,{title:e.data.name}),Object(ee.jsxs)(X.a,{children:[Object(ee.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:["\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",Object(ee.jsx)("img",{style:{position:"absolute",top:"6px",right:"15px"},src:"https://openweathermap.org/img/w/".concat(e.data.icon,".png")})," ",e.data.temp," C\xb0"]}),Object(ee.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:["\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c : ",e.data.humidity,"%"]}),Object(ee.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:["\u0410\u0442\u043c\u043e\u0441\u0444\u0435\u0440\u043d\u043e\u0435 \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435 : ",e.data.pressure," \u043c\u043c.\u0440\u0442.\u0441\u0442"]}),Object(ee.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:["\u0421\u0438\u043b\u0430 \u0438 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u0442\u0440\u0430 : ",e.data.wind," \u043c/\u0441 ",Object(ee.jsx)(Z.a,{style:{transform:"rotate(".concat(e.data.deg,"deg)"),position:"absolute",top:"139px",right:"17px"}})]}),Object(ee.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 :"}),Object(ee.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:e.data.date})]}),Object(ee.jsx)(G.a,{disableSpacing:!0,children:Object(ee.jsxs)("div",{className:ne.a.container,style:{justifyContent:"space-between"},children:[Object(ee.jsx)(te,{onClickHandler:function(){a(D({id:e.data.id})),a(W({id:e.data.id}))},title:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c",color:"secondary"}),Object(ee.jsx)(te,{onClickHandler:function(){a(L({id:e.data.id,city:e.data.name}))},title:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",color:"primary"})]})})]})},ie=a(155),se=r.a.memo((function(e){return Object(ee.jsx)(ie.a,{container:!0,spacing:3,style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:e.cities.length>0?e.cities.map((function(t){return Object(ee.jsx)(ce,{data:e.weathers[t]},t)})):""})})),oe=function(e){return Object(ee.jsx)(q.a,{style:{margin:"10px",minWidth:"20vw",display:"flex",justifyContent:"center"},children:Object(ee.jsxs)(X.a,{children:[Object(ee.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:e.name}),Object(ee.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:[e.title," : ",e.temp," C\xb0"]})]})})},ue=r.a.memo((function(e){var t,a,r,c,i=Object(n.useMemo)((function(){return function(e){var t=Object.values(e),a=Math.max.apply(null,t.map((function(e){return e.temp_max}))),n=Math.min.apply(null,t.map((function(e){return e.temp_min})));return[t.find((function(e){return e.temp_max===a})),t.find((function(e){return e.temp_min===n}))]}(e.weathers)}),[e.weathers]);return Object(ee.jsx)("div",{className:ne.a.container,children:void 0!==i[0]&&i.length>0?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(oe,{name:null===(t=i[0])||void 0===t?void 0:t.name,temp:null===(a=i[0])||void 0===a?void 0:a.temp_max,title:"\u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f"}),Object(ee.jsx)(oe,{name:null===(r=i[1])||void 0===r?void 0:r.name,temp:null===(c=i[1])||void 0===c?void 0:c.temp_max,title:"\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f"})]}):""})})),de=a(53),le=a.n(de),pe=a(160),he=a(120),fe=r.a.memo((function(e){return Object(ee.jsxs)("div",{className:le.a.container,children:[Object(ee.jsx)(pe.a,{type:"text",placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",onChange:e.onHandlerSearch,value:e.value,style:{margin:"10px"}}),Object(ee.jsx)(te,{onClickHandler:e.onSearchHandler,title:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c",color:"primary"}),Object(ee.jsx)(he.a,{className:le.a.suggestion,children:e.flag?e.citesNewArray:null})]})})),je=function(e){var t=Object(o.c)((function(e){return e.cities.searchCities})),a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],i=r[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),l=d[0],p=d[1],h=Object(n.useCallback)((function(e){i(null===e||void 0===e?void 0:e.name),p(!1)}),[c,l]),f=Object(n.useCallback)((function(){""!==c&&(e.dispatch(R(c)),i(""))}),[c,l]),j=t.map((function(e){return Object(ee.jsxs)("div",{onClick:function(){h(e.matching_alternate_names[0])},children:[e.matching_full_name," "]},e.matching_full_name)})),b=Object(n.useCallback)((function(t){i(t.currentTarget.value.trim()),t.currentTarget.value.length>=3?(e.dispatch(g(t.currentTarget.value)),p(!0)):p(!1)}),[c,l]);return Object(ee.jsx)("div",{style:{width:"100vw",display:"flex",justifyContent:"center"},children:Object(ee.jsx)("div",{children:Object(ee.jsx)(fe,{value:c,onHandlerSearch:b,citesNewArray:j,flag:l,onSearchHandler:f})})})},be=a(75),me=a(161),Oe=a(158);function xe(e){return Object(ee.jsx)(Oe.a,Object(be.a)({elevation:6,variant:"filled"},e))}function ye(){var e=Object(o.c)((function(e){return e.app.error})),t=Object(o.b)(),a=function(e,a){"clickaway"!==a&&t(y({error:null}))},n=null!==e;return Object(ee.jsx)(me.a,{open:n,autoHideDuration:6e3,onClose:a,children:Object(ee.jsx)(xe,{onClose:a,severity:"error",children:e})})}var ve=a(162),ge=a(157),we=Object(P.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Ce(){var e=we(),t=r.a.useState(!0),a=Object(s.a)(t,1)[0];return Object(ee.jsx)(ve.a,{className:e.backdrop,open:a,children:Object(ee.jsx)(ge.a,{color:"inherit"})})}var ke=a(159);var Se=function(e){var t=Object(o.b)();return function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),1e3*t);return function(){return clearInterval(e)}}}),[t])}((function(){t(J())}),e.delay),Object(ee.jsx)(ee.Fragment,{})},_e=r.a.memo((function(e){var t=Object(n.useCallback)((function(){e.changeFlag()}),[e.changeFlag]);return Object(ee.jsxs)("div",{style:{width:"100vw"},className:ne.a.container,children:[Object(ee.jsxs)("div",{children:["\u0430\u0432\u0442\u043e\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 5\u0441 ",Object(ee.jsx)(ke.a,{onClick:t,checked:e.flag})]}),e.flag&&Object(ee.jsx)(Se,{delay:5})]})}));var We=function(){var e=Object(o.c)((function(e){return e.weathers})),t=Object(o.c)((function(e){return e.cities.trackCities})),a=Object(o.c)((function(e){return e.app.error})),r=Object(o.c)((function(e){return e.app.status})),c=Object(o.b)(),i=Object(n.useState)(!0),u=Object(s.a)(i,2),d=u[0],l=u[1],p=Object(n.useState)(!1),h=Object(s.a)(p,2),f=h[0],j=h[1];return Object(n.useEffect)((function(){d&&(c(_({cities:null===localStorage.getItem("cities")?[]:JSON.parse(localStorage.getItem("cities"))})),c(V({weathers:null===localStorage.getItem("weathers")?{}:JSON.parse(localStorage.getItem("weathers"))})),c(J()),l(!1))}),[d,c]),Object(n.useEffect)((function(){var a;d||(a=t,localStorage.setItem("cities",JSON.stringify(a)),function(e){localStorage.setItem("weathers",JSON.stringify(e))}(e))}),[t,e]),"loading"===r?Object(ee.jsx)(Ce,{}):Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(ue,{weathers:e}),Object(ee.jsx)(je,{dispatch:c}),Object(ee.jsx)(_e,{changeFlag:function(){j(!f)},flag:f}),Object(ee.jsx)(se,{cities:t,weathers:e}),Object(ee.jsx)(Se,{delay:10}),a&&Object(ee.jsx)(ye,{})]})},Ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,164)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},Ne=a(20),Fe=a(36),He=Object(Ne.c)({app:O,weathers:U,cities:C}),Ae=Object(p.a)({reducer:He,middleware:function(e){return e().prepend(Fe.a)}});i.a.render(Object(ee.jsx)(o.a,{store:Ae,children:Object(ee.jsx)(We,{})}),document.getElementById("root")),Ie()},28:function(e,t,a){e.exports={container:"Common_container__3lNRX"}},53:function(e,t,a){e.exports={container:"Search_container__1HmFE",suggestion:"Search_suggestion__3tqjF"}},87:function(e,t,a){}},[[119,1,2]]]);
//# sourceMappingURL=main.ab2a7106.chunk.js.map