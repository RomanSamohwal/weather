(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{119:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),o=(a(87),a(25)),s=a(12),u=a(11),d=a.n(u),l=a(17),p=a(18),h=a(42),f=a.n(h),j=f.a.create({baseURL:"https://api.teleport.org/api/cities/"}),b={getCity:function(){var t=Object(l.a)(d.a.mark((function t(e){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.get("?search=".concat(e,"&limit=5"));case 2:return a=t.sent,console.log(a),t.abrupt("return",a.data._embedded["city:search-results"]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=Object(p.c)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppError:function(t,e){t.error=e.payload.error},setAppStatus:function(t,e){t.status=e.payload.status}}}),O=m.reducer,x=m.actions,y=x.setAppError,v=x.setAppStatus,g=Object(p.b)("cites/fetchCities",function(){var t=Object(l.a)(d.a.mark((function t(e,a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.getCity(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),a.dispatch(y({error:String(t.t0)})),t.abrupt("return",a.rejectWithValue(null));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,a){return t.apply(this,arguments)}}()),w=Object(p.c)({name:"cites",initialState:{trackCities:[],searchCities:[]},reducers:{addCity:function(t,e){t.trackCities.find((function(t){return t===e.payload.cityId}))||t.trackCities.unshift(e.payload.cityId)},addTrackCities:function(t,e){t.trackCities=e.payload.cities},deleteCity:function(t,e){var a=t.trackCities.findIndex((function(t){return t===e.payload.id}));t.trackCities.splice(a,1)}},extraReducers:function(t){t.addCase(g.fulfilled,(function(t,e){t.searchCities=e.payload}))}}),C=w.reducer,k=w.actions,S=k.addCity,_=k.addTrackCities,W=k.deleteCity,I="f49f252e14653d371d0e45f5c7398f20",N=f.a.create({baseURL:"https://api.openweathermap.org/"}),F={getWeatherCheckedCity:function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.get("data/2.5/weather?q=".concat(e,"&appid=").concat(I));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getUpdatedWeatherCheckedCity:function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.get("data/2.5/weather?id=".concat(e,"&appid=").concat(I));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateCheckedWeatherCityAll:function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.map((function(t){return N.get("data/2.5/weather?id=".concat(t,"&appid=").concat(I))})));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},H=function(t,e){return{id:t.data.id,name:e,temp:T(t.data.main.temp),temp_max:T(t.data.main.temp_max),temp_min:T(t.data.main.temp_min),humidity:t.data.main.humidity,pressure:E(t.data.main.pressure),icon:t.data.weather[0].icon,wind:t.data.wind.speed,deg:t.data.wind.deg,date:A()}},A=function(){return(new Date).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"})},T=function(t){return Math.round(t-273)},E=function(t){return Math.round(.00750063755419211*t*100)},J=Object(p.b)("weathers/updateWeatherAll",function(){var t=Object(l.a)(d.a.mark((function t(e,a){var n,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.getState(),a.dispatch(v({status:"loading"})),t.next=5,F.updateCheckedWeatherCityAll(n.cities.trackCities);case 5:return r=t.sent,a.dispatch(v({status:"succeeded"})),c=r.map((function(t){return H(t,n.weathers[t.data.id].name)})).reduce((function(t,e){return t[e.id]=e,t}),{}),t.abrupt("return",{weathers:c});case 11:return t.prev=11,t.t0=t.catch(0),a.dispatch(v({status:"failed"})),a.dispatch(y({error:String(t.t0)})),t.abrupt("return",a.rejectWithValue(null));case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()),L=Object(p.b)("weathers/updateWeather",function(){var t=Object(l.a)(d.a.mark((function t(e,a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(v({status:"loading"})),t.next=4,F.getUpdatedWeatherCheckedCity(e.id);case 4:return n=t.sent,a.dispatch(v({status:"succeeded"})),r=H(n,e.city),t.abrupt("return",{weather:r});case 10:return t.prev=10,t.t0=t.catch(0),a.dispatch(v({status:"failed"})),a.dispatch(y({error:String(t.t0)})),t.abrupt("return",a.rejectWithValue(null));case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()),R=Object(p.b)("weathers/fetchWeather",function(){var t=Object(l.a)(d.a.mark((function t(e,a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.dispatch(v({status:"loading"})),t.next=4,F.getWeatherCheckedCity(e);case 4:return n=t.sent,r=H(n,e),a.dispatch(S({cityId:r.id})),a.dispatch(v({status:"succeeded"})),t.abrupt("return",{weather:r});case 11:return t.prev=11,t.t0=t.catch(0),a.dispatch(v({status:"failed"})),a.dispatch(y({error:String(t.t0)})),t.abrupt("return",a.rejectWithValue(null));case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()),M=Object(p.c)({name:"weathers",initialState:{},reducers:{addWeathers:function(t,e){return e.payload.weathers},deleteCityWeather:function(t,e){delete t[e.payload.id]}},extraReducers:function(t){t.addCase(R.fulfilled,(function(t,e){void 0!==e.payload.weather&&(t[e.payload.weather.id]=e.payload.weather)})),t.addCase(S,(function(t,e){void 0!==e.payload.cityId&&(t[e.payload.cityId]={})})),t.addCase(L.fulfilled,(function(t,e){t[e.payload.weather.id]=e.payload.weather})),t.addCase(J.fulfilled,(function(t,e){return e.payload.weathers}))}}),U=M.reducer,z=M.actions,V=z.addWeathers,D=z.deleteCityWeather,P=a(150),q=a(151),B=a(152),X=a(153),G=a(154),K=a(48),Q=a(47),Y=a(74),Z=a.n(Y),$=a(148),tt=a(2),et=r.a.memo((function(t){return Object(tt.jsx)($.a,{onClick:t.onClickHandler,type:"button",variant:"contained",color:t.color,children:t.title})})),at=a(28),nt=a.n(at),rt=Object(P.a)((function(t){return{root:{maxWidth:420},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Q.a[500]}}})),ct=function(t){var e=rt(),a=Object(s.b)();return Object(tt.jsxs)(q.a,{className:e.root,style:{margin:"10px",position:"relative",width:"20em"},children:[Object(tt.jsx)(B.a,{title:t.data.name}),Object(tt.jsxs)(X.a,{children:[Object(tt.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:["\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",Object(tt.jsx)("img",{style:{position:"absolute",top:"6px",right:"15px"},src:"https://openweathermap.org/img/w/".concat(t.data.icon,".png")})," ",t.data.temp," C\xb0"]}),Object(tt.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:["\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c : ",t.data.humidity,"%"]}),Object(tt.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:["\u0410\u0442\u043c\u043e\u0441\u0444\u0435\u0440\u043d\u043e\u0435 \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435 : ",t.data.pressure," \u043c\u043c.\u0440\u0442.\u0441\u0442"]}),Object(tt.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:["\u0421\u0438\u043b\u0430 \u0438 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u0435\u0442\u0440\u0430 : ",t.data.wind," \u043c/\u0441 ",Object(tt.jsx)(Z.a,{style:{transform:"rotate(".concat(t.data.deg,"deg)"),position:"absolute",top:"139px",right:"17px"}})]}),Object(tt.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 :"}),Object(tt.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:t.data.date})]}),Object(tt.jsx)(G.a,{disableSpacing:!0,children:Object(tt.jsxs)("div",{className:nt.a.container,style:{justifyContent:"space-between"},children:[Object(tt.jsx)(et,{onClickHandler:function(){a(D({id:t.data.id})),a(W({id:t.data.id}))},title:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c",color:"secondary"}),Object(tt.jsx)(et,{onClickHandler:function(){a(L({id:t.data.id,city:t.data.name}))},title:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",color:"primary"})]})})]})},it=a(155),ot=r.a.memo((function(t){return Object(tt.jsx)(it.a,{container:!0,spacing:3,style:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:t.cities.length>0?t.cities.map((function(e){return Object(tt.jsx)(ct,{data:t.weathers[e]},e)})):""})})),st=function(t){return Object(tt.jsx)(q.a,{style:{margin:"10px",minWidth:"20vw",display:"flex",justifyContent:"center"},children:Object(tt.jsxs)(X.a,{children:[Object(tt.jsx)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:t.name}),Object(tt.jsxs)(K.a,{variant:"body2",color:"textSecondary",component:"p",children:[t.title," : ",t.temp," C\xb0"]})]})})},ut=r.a.memo((function(t){var e,a,r,c,i=Object(n.useMemo)((function(){return function(t){var e=Object.values(t),a=Math.max.apply(null,e.map((function(t){return t.temp_max}))),n=Math.min.apply(null,e.map((function(t){return t.temp_min})));return[e.find((function(t){return t.temp_max===a})),e.find((function(t){return t.temp_min===n}))]}(t.weathers)}),[t.weathers]);return Object(tt.jsx)("div",{className:nt.a.container,children:void 0!==i[0]&&i.length>0?Object(tt.jsxs)(tt.Fragment,{children:[Object(tt.jsx)(st,{name:null===(e=i[0])||void 0===e?void 0:e.name,temp:null===(a=i[0])||void 0===a?void 0:a.temp_max,title:"\u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f"}),Object(tt.jsx)(st,{name:null===(r=i[1])||void 0===r?void 0:r.name,temp:null===(c=i[1])||void 0===c?void 0:c.temp_max,title:"\u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f"})]}):""})})),dt=a(53),lt=a.n(dt),pt=a(160),ht=a(120),ft=r.a.memo((function(t){return Object(tt.jsxs)("div",{className:lt.a.container,children:[Object(tt.jsx)(pt.a,{type:"text",placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",onChange:t.onHandlerSearch,value:t.value,style:{margin:"10px"}}),Object(tt.jsx)(et,{onClickHandler:t.onSearchHandler,title:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c",color:"primary"}),Object(tt.jsx)(ht.a,{className:lt.a.suggestion,children:t.flag?t.citesNewArray:null})]})})),jt=function(t){var e=Object(s.c)((function(t){return t.cities.searchCities})),a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],i=r[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),l=d[0],p=d[1],h=Object(n.useCallback)((function(t){i(null===t||void 0===t?void 0:t.name),p(!1)}),[c,l]),f=Object(n.useCallback)((function(){""!==c&&(t.dispatch(R(c)),i(""))}),[c,l]),j=e.map((function(t){return Object(tt.jsxs)("div",{onClick:function(){h(t.matching_alternate_names[0])},children:[t.matching_full_name," "]},t.matching_full_name)})),b=Object(n.useCallback)((function(e){i(e.currentTarget.value.trim()),e.currentTarget.value.length>=3?(t.dispatch(g(e.currentTarget.value)),p(!0)):p(!1)}),[c,l]);return Object(tt.jsx)("div",{style:{width:"100vw",display:"flex",justifyContent:"center"},children:Object(tt.jsx)("div",{children:Object(tt.jsx)(ft,{value:c,onHandlerSearch:b,citesNewArray:j,flag:l,onSearchHandler:f})})})},bt=a(75),mt=a(161),Ot=a(158);function xt(t){return Object(tt.jsx)(Ot.a,Object(bt.a)({elevation:6,variant:"filled"},t))}function yt(){var t=Object(s.c)((function(t){return t.app.error})),e=Object(s.b)(),a=function(t,a){"clickaway"!==a&&e(y({error:null}))},n=null!==t;return Object(tt.jsx)(mt.a,{open:n,autoHideDuration:6e3,onClose:a,children:Object(tt.jsx)(xt,{onClose:a,severity:"error",children:t})})}var vt=a(162),gt=a(157),wt=Object(P.a)((function(t){return{backdrop:{zIndex:t.zIndex.drawer+1,color:"#fff"}}}));function Ct(){var t=wt(),e=r.a.useState(!0),a=Object(o.a)(e,1)[0];return Object(tt.jsx)(vt.a,{className:t.backdrop,open:a,children:Object(tt.jsx)(gt.a,{color:"inherit"})})}var kt=a(159);var St=function(t){var e=Object(s.b)();return function(t,e){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=t}),[t]),Object(n.useEffect)((function(){if(null!==e){var t=setInterval((function(){a.current()}),1e3*e);return function(){return clearInterval(t)}}}),[e])}((function(){e(J())}),3),Object(tt.jsx)(tt.Fragment,{})},_t=r.a.memo((function(t){var e=Object(n.useCallback)((function(){t.changeFlag()}),[t.changeFlag]);return Object(tt.jsxs)("div",{style:{width:"100vw"},className:nt.a.container,children:[Object(tt.jsxs)("div",{children:["\u0430\u0432\u0442\u043e\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 5\u0441 ",Object(tt.jsx)(kt.a,{onClick:e,checked:t.flag})]}),t.flag&&Object(tt.jsx)(St,{})]})}));var Wt=function(){var t=Object(s.c)((function(t){return t.weathers})),e=Object(s.c)((function(t){return t.cities.trackCities})),a=Object(s.c)((function(t){return t.app.error})),r=Object(s.c)((function(t){return t.app.status})),c=Object(s.b)(),i=Object(n.useState)(!0),u=Object(o.a)(i,2),d=u[0],l=u[1],p=Object(n.useState)(!1),h=Object(o.a)(p,2),f=h[0],j=h[1];return Object(n.useEffect)((function(){d&&(c(_({cities:null===localStorage.getItem("cities")?[]:JSON.parse(localStorage.getItem("cities"))})),c(V({weathers:null===localStorage.getItem("weathers")?{}:JSON.parse(localStorage.getItem("weathers"))})),c(J()),l(!1))}),[d,c]),Object(n.useEffect)((function(){var a;d||(a=e,localStorage.setItem("cities",JSON.stringify(a)),function(t){localStorage.setItem("weathers",JSON.stringify(t))}(t))}),[e,t]),"loading"===r?Object(tt.jsx)(Ct,{}):Object(tt.jsxs)(tt.Fragment,{children:[Object(tt.jsx)(ut,{weathers:t}),Object(tt.jsx)(jt,{dispatch:c}),Object(tt.jsx)(_t,{changeFlag:function(){j(!f)},flag:f}),Object(tt.jsx)(ot,{cities:e,weathers:t}),a&&Object(tt.jsx)(yt,{})]})},It=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,164)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),c(t),i(t)}))},Nt=a(20),Ft=a(36),Ht=Object(Nt.c)({app:O,weathers:U,cities:C}),At=Object(p.a)({reducer:Ht,middleware:function(t){return t().prepend(Ft.a)}});i.a.render(Object(tt.jsx)(s.a,{store:At,children:Object(tt.jsx)(Wt,{})}),document.getElementById("root")),It()},28:function(t,e,a){t.exports={container:"Common_container__3lNRX"}},53:function(t,e,a){t.exports={container:"Search_container__1HmFE",suggestion:"Search_suggestion__3tqjF"}},87:function(t,e,a){}},[[119,1,2]]]);
//# sourceMappingURL=main.8763ed30.chunk.js.map